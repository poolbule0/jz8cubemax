slasm-0.13.6 beta               D:\poolbule0\芯片代码模板\C_1521\obj\FW_SLEEP.asm12-2-2025  17:39:41          PAGE  1


               00001 ;--------------------------------------------------------
               00002 ; File Created by SLCC : free open source ANSI-C Compiler
               00003 ; Version 3.6.0 #Sep 28 2025 (MSVC)
               00004 ;--------------------------------------------------------
               00005 ; SL port for the RISC core
               00006 ;--------------------------------------------------------
               00007 ;       .file   "D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C"
               00008         list    p=JZ8P1521
               00009         radix dec
               00010         include "JZ8P1521.inc"
               00001         LIST                                                                  
               00002 ; JZ8P1521.INC  Standard Header File, Version 1.00
               00083         LIST
               00011 ;--------------------------------------------------------
               00012 ; external declarations
               00013 ;--------------------------------------------------------
               00014         extern  _fw_pwm1Init
               00015         extern  _fw_pwm2Init
               00016         extern  _fw_pwm3Init
               00017         extern  _keyScan
               00018         extern  _keyProcess
               00019         extern  _fw_clrRam
               00020         extern  _fw_gpioInit
               00021         extern  _fw_tc0Init
               00022         extern  _IARbits
               00023         extern  _TCCbits
               00024         extern  _PCLbits
               00025         extern  _STATUSbits
               00026         extern  _RSRbits
               00027         extern  _PORT5bits
               00028         extern  _PORT6bits
               00029         extern  _LVDCONbits
               00030         extern  _PWMCONbits
               00031         extern  _PRDbits
               00032         extern  _PDC1bits
               00033         extern  _PDC2bits
               00034         extern  _PDC3bits
               00035         extern  _ICIECRbits
               00036         extern  _CPUCONbits
               00037         extern  _ISRbits
               00038         extern  _U_Flage
               00039         extern  _r_g_workMod
               00040         extern  _IAR
               00041         extern  _TCC
               00042         extern  _PCL
               00043         extern  _STATUS
               00044         extern  _RSR
               00045         extern  _PORT5
               00046         extern  _PORT6
               00047         extern  _LVDCON
               00048         extern  _PWMCON
               00049         extern  _PRD
               00050         extern  _PDC1
               00051         extern  _PDC2
               00052         extern  _PDC3
               00053         extern  _ICIECR
               00054         extern  _CPUCON
               00055         extern  _ISR
               00056 
               00057         extern STK06
               00058         extern STK05
               00059         extern STK04
               00060         extern STK03
               00061         extern STK02
               00062         extern STK01
               00063         extern STK00
               00064 ;--------------------------------------------------------
               00065 ; global declarations
               00066 ;--------------------------------------------------------
               00067         global  _fw_sleepEvent
               00068         global  _sleep_cnt
               00069 
               00070 ;--------------------------------------------------------
               00071 ; global definitions
               00072 ;--------------------------------------------------------
               00073 ;--------------------------------------------------------
               00074 ; absolute symbol definitions
               00075 ;--------------------------------------------------------
               00076 ;--------------------------------------------------------
               00077 ; compiler-defined variables
               00078 ;--------------------------------------------------------
               00079 UDL_FW_SLEEP_0  udata
               00080 r0x1002 res     1
               00081 ;--------------------------------------------------------
               00082 ; initialized data
               00083 ;--------------------------------------------------------
               00084 
               00085 ID_FW_SLEEP_0   idata
               00086 _sleep_cnt
0000 3F82      00087         add 0x02,a
               00088         db      0x00
               00089 
               00090 
               00091 ;@Allocation info for local variables in function 'fw_sleepEvent'
               00092 ;@fw_sleepEvent fw_pwm1Init               Allocated to registers ;size:2
               00093 ;@fw_sleepEvent fw_pwm2Init               Allocated to registers ;size:2
               00094 ;@fw_sleepEvent fw_pwm3Init               Allocated to registers ;size:2
               00095 ;@fw_sleepEvent keyScan                   Allocated to registers ;size:2
               00096 ;@fw_sleepEvent keyProcess                Allocated to registers ;size:2
               00097 ;@fw_sleepEvent fw_clrRam                 Allocated to registers ;size:2
               00098 ;@fw_sleepEvent fw_gpioInit               Allocated to registers ;size:2
               00099 ;@fw_sleepEvent fw_tc0Init                Allocated to registers ;size:2
               00100 ;@fw_sleepEvent IARbits                   Allocated to registers ;size:1
               00101 ;@fw_sleepEvent TCCbits                   Allocated to registers ;size:1
               00102 ;@fw_sleepEvent PCLbits                   Allocated to registers ;size:1
               00103 ;@fw_sleepEvent STATUSbits                Allocated to registers ;size:1
               00104 ;@fw_sleepEvent RSRbits                   Allocated to registers ;size:1
               00105 ;@fw_sleepEvent PORT5bits                 Allocated to registers ;size:1
               00106 ;@fw_sleepEvent PORT6bits                 Allocated to registers ;size:1
               00107 ;@fw_sleepEvent LVDCONbits                Allocated to registers ;size:1
               00108 ;@fw_sleepEvent PWMCONbits                Allocated to registers ;size:1
               00109 ;@fw_sleepEvent PRDbits                   Allocated to registers ;size:1
               00110 ;@fw_sleepEvent PDC1bits                  Allocated to registers ;size:1
               00111 ;@fw_sleepEvent PDC2bits                  Allocated to registers ;size:1
               00112 ;@fw_sleepEvent PDC3bits                  Allocated to registers ;size:1
               00113 ;@fw_sleepEvent ICIECRbits                Allocated to registers ;size:1
               00114 ;@fw_sleepEvent CPUCONbits                Allocated to registers ;size:1
               00115 ;@fw_sleepEvent ISRbits                   Allocated to registers ;size:1
               00116 ;@fw_sleepEvent U_Flage                   Allocated to registers ;size:1
               00117 ;@fw_sleepEvent r_g_workMod               Allocated to registers ;size:1
               00118 ;@fw_sleepEvent sleep_cnt                 Allocated to registers ;size:1
               00119 ;@fw_sleepEvent IAR                       Allocated to registers ;size:1
               00120 ;@fw_sleepEvent TCC                       Allocated to registers ;size:1
               00121 ;@fw_sleepEvent PCL                       Allocated to registers ;size:1
               00122 ;@fw_sleepEvent STATUS                    Allocated to registers ;size:1
               00123 ;@fw_sleepEvent RSR                       Allocated to registers ;size:1
               00124 ;@fw_sleepEvent PORT5                     Allocated to registers ;size:1
               00125 ;@fw_sleepEvent PORT6                     Allocated to registers ;size:1
               00126 ;@fw_sleepEvent LVDCON                    Allocated to registers ;size:1
               00127 ;@fw_sleepEvent PWMCON                    Allocated to registers ;size:1
               00128 ;@fw_sleepEvent PRD                       Allocated to registers ;size:1
               00129 ;@fw_sleepEvent PDC1                      Allocated to registers ;size:1
               00130 ;@fw_sleepEvent PDC2                      Allocated to registers ;size:1
               00131 ;@fw_sleepEvent PDC3                      Allocated to registers ;size:1
               00132 ;@fw_sleepEvent ICIECR                    Allocated to registers ;size:1
               00133 ;@fw_sleepEvent CPUCON                    Allocated to registers ;size:1
               00134 ;@fw_sleepEvent ISR                       Allocated to registers ;size:1
               00135 ;@end Allocation info for local variables in function 'fw_sleepEvent';
               00136 
               00137 ;--------------------------------------------------------
               00138 ; overlayable items in internal ram 
               00139 ;--------------------------------------------------------
               00140 ;       udata_ovr
               00141 ;--------------------------------------------------------
               00142 ; code
               00143 ;--------------------------------------------------------
               00144 code_FW_SLEEP   code
               00145 ;***
               00146 ;  pBlock Stats: dbName = C
               00147 ;***
               00148 ;has an exit
               00149 ;functions called:
               00150 ;   _fw_tc0Init
               00151 ;   _fw_tc0Init
               00152 ;1 compiler assigned register :
               00153 ;   r0x1002
               00154 ;; Starting pCode block
               00155 S_FW_SLEEP__fw_sleepEvent       code
0000           00156 _fw_sleepEvent: ;Function start
               00157 ; 2 exit points
               00158 ;       .line   5; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C  if(F_CHARGE == 0)
0000 2080      00159         JBTC    _U_Flage,1
0001 1000      00160         JMP     _00109_DS_
               00161 ;       .line   7; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C  if(sleep_cnt++ > 10)
0002 3000      00162         MOV     A,_sleep_cnt
0003 3880      00163         MOV     r0x1002,A
0004 3280      00164         INC     _sleep_cnt
               00165 ;;swapping arguments (AOP_TYPEs 1/2)
0005 080B      00166         MOV     A,@0x0b
0006 3A00      00167         SUB     A,r0x1002
0007 2403      00168         JBTS    STATUS,0
0008 1000      00169         JMP     _00109_DS_
               00170 ;       .line   9; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C  sleep_cnt = 0;
0009 3980      00171         CLR     _sleep_cnt
               00172 ;       .line   12; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C LVDCON = 0;// 关LVD
000A 3980      00173         CLR     _LVDCON
               00174 ;       .line   14; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C IOCP_W(IMR,0x00);   //关闭中断
000B 0800      00175         mov     a,@0x00
000C 380F      00176         iw      IMR
               00177 ;       .line   15; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C IOCP_W(WDTCR,0x00);     
000D 0800      00178         mov     a,@0x00
000E 380E      00179         iw      WDTCR
               00180 ;       .line   16; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C ISR     =0;              // 清中断标志位
000F 3980      00181         CLR     _ISR
               00182 ;       .line   17; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C DI();                    // 禁止唤醒进入中断
0010 3821      00183         di      
               00184 ;       .line   18; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C IOCP_W(IMR,0x02);    //使能端口变化中断，不使能无法唤醒
0011 0802      00185         mov     a,@0x02
0012 380F      00186         iw      IMR
               00187 ;       .line   19; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C SLEEP();
0013 3803      00188         sleep   
               00189 ;       .line   20; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C NOP(); 
0014 3800      00190         nop     
               00191 ;       .line   21; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C NOP();
0015 3800      00192         nop     
               00193 ;       .line   22; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C NOP();
0016 3800      00194         nop     
               00195 ;       .line   23; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C NOP();
0017 3800      00196         nop     
               00197 ;       .line   24; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C CWDT();
0018 3804      00198         CWDT    
               00199 ;       .line   30; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C IOCP_W(IMR,0x00);   //关闭中断
0019 0800      00200         mov     a,@0x00
001A 380F      00201         iw      IMR
               00202 ;       .line   31; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C fw_tc0Init();
001B 1800      00203         CALL    _fw_tc0Init
               00204 ;       .line   32; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C EI();
001C 3820      00205         ei      
               00206 ;       .line   33; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C ISR=0;
001D 3980      00207         CLR     _ISR
               00208 ;       .line   39; D:\POOLBULE0\芯片代码模板\C_1521\FW_SLEEP.C }
001E           00209 _00109_DS_:
001E 3822      00210         RET     
               00211 ; exit point of _fw_sleepEvent
               00212 
               00213 
               00214 ;       code size estimation:
               00215 ;          15+    0 =    15 instructions (   30 byte)
               00216 


SYMBOL TABLE
  LABEL                             VALUE 

CONT                              00000002
CPUCON                            0000000E
IAR                               00000000
ICIECR                            0000000D
IMR                               0000000F
ISR                               0000000F
LVDCON                            00000007
P5CR                              00000005
P6CR                              00000006
PCL                               00000002
PDC1                              0000000A
PDC2                              0000000B
PDC3                              0000000C
PDCR                              0000000B
PHCR                              0000000D
PHDCR                             00000009
PORT5                             00000005
PORT6                             00000006
PRD                               00000009
PWMCON                            00000008
RSR                               00000004
STATUS                            00000003
STK00                             00000000
STK01                             00000000
STK02                             00000000
STK03                             00000000
STK04                             00000000
STK05                             00000000
STK06                             00000000
TCC                               00000001
WDTCR                             0000000E
_00109_DS_                        0000001E
_CPUCON                           00000000
_CPUCONbits                       00000000
_IAR                              00000000
_IARbits                          00000000
_ICIECR                           00000000
_ICIECRbits                       00000000
_ISR                              00000000
_ISRbits                          00000000
_LVDCON                           00000000
_LVDCONbits                       00000000
_PCL                              00000000
_PCLbits                          00000000
_PDC1                             00000000
_PDC1bits                         00000000
_PDC2                             00000000
_PDC2bits                         00000000
_PDC3                             00000000
_PDC3bits                         00000000
_PORT5                            00000000
_PORT5bits                        00000000
_PORT6                            00000000
_PORT6bits                        00000000
_PRD                              00000000
_PRDbits                          00000000
_PWMCON                           00000000
_PWMCONbits                       00000000
_RSR                              00000000
_RSRbits                          00000000
_STATUS                           00000000
_STATUSbits                       00000000
_TCC                              00000000
_TCCbits                          00000000
_U_Flage                          00000000
__jz8p1521                        00000001
_fw_clrRam                        00000000
_fw_gpioInit                      00000000
_fw_pwm1Init                      00000000
_fw_pwm2Init                      00000000
_fw_pwm3Init                      00000000
_fw_sleepEvent                    00000000
_fw_tc0Init                       00000000
_keyProcess                       00000000
_keyScan                          00000000
_r_g_workMod                      00000000
_sleep_cnt                        00000000
r0x1002                           00000000


Errors   :       0
Warnings :       0 reported,       0 suppressed
Messages :       0 reported,       0 suppressed

